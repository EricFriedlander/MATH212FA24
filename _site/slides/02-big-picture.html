<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prof.&nbsp;Maria Tackett">

<title>STA 210 - Fall 2023 - The big picture</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">The big picture</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/sta210-fa23" title="GitHub organization" class="quarto-navigation-tool px-1" aria-label="GitHub organization"><i class="bi bi-github"></i></a>
    <a href="https://cmgr.oit.duke.edu/containers" title="RStudio Containers" class="quarto-navigation-tool px-1" aria-label="RStudio Containers"><i class="bi bi-code-square"></i></a>
    <div class="dropdown">
      <a href="" title="Sakai" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Sakai"><i class="bi bi-person-fill"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://sakai.duke.edu/portal/site/f2e8b7dc-61e6-4431-9b5c-29f8411ee5db">
            Sakai
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://edstem.org/us/courses/44523/discussion/">
            Ed Discussion
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.gradescope.com/courses/584312">
            Gradescope
            </a>
          </li>
      </ul>
    </div>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../support.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Support</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful links</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Computing</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../computing-access.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Access</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../computing-troubleshooting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Troubleshooting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../computing-r-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Project</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project-instructions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instructions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project-tips.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tips + resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stats-experience.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics experience</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://docs.google.com/spreadsheets/d/1dUD4SOpM79BL2kdvue9I2TP-ibcdxfpOIkHkMreYx64/edit?usp=sharing" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture recordings</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#announcements" id="toc-announcements" class="nav-link active" data-scroll-target="#announcements">Announcements</a></li>
  <li><a href="#questions-from-last-class" id="toc-questions-from-last-class" class="nav-link" data-scroll-target="#questions-from-last-class">Questions from last class?</a>
  <ul class="collapse">
  <li><a href="#topics" id="toc-topics" class="nav-link" data-scroll-target="#topics">Topics</a></li>
  </ul></li>
  <li><a href="#reproducibility" id="toc-reproducibility" class="nav-link" data-scroll-target="#reproducibility">Reproducibility</a>
  <ul class="collapse">
  <li><a href="#reproducibility-checklist" id="toc-reproducibility-checklist" class="nav-link" data-scroll-target="#reproducibility-checklist">Reproducibility checklist</a></li>
  <li><a href="#why-is-reproducibility-important" id="toc-why-is-reproducibility-important" class="nav-link" data-scroll-target="#why-is-reproducibility-important">Why is reproducibility important?</a></li>
  <li><a href="#when-things-go-wrong" id="toc-when-things-go-wrong" class="nav-link" data-scroll-target="#when-things-go-wrong">When things go wrong</a></li>
  <li><a href="#toolkit" id="toc-toolkit" class="nav-link" data-scroll-target="#toolkit">Toolkit</a></li>
  <li><a href="#r-and-rstudio" id="toc-r-and-rstudio" class="nav-link" data-scroll-target="#r-and-rstudio">R and RStudio</a></li>
  <li><a href="#rstudio-ide" id="toc-rstudio-ide" class="nav-link" data-scroll-target="#rstudio-ide">RStudio IDE</a></li>
  <li><a href="#quarto" id="toc-quarto" class="nav-link" data-scroll-target="#quarto">Quarto</a></li>
  <li><a href="#quarto-1" id="toc-quarto-1" class="nav-link" data-scroll-target="#quarto-1">Quarto</a></li>
  <li><a href="#how-will-we-use-quarto" id="toc-how-will-we-use-quarto" class="nav-link" data-scroll-target="#how-will-we-use-quarto">How will we use Quarto?</a></li>
  </ul></li>
  <li><a href="#version-control-with-git-and-github" id="toc-version-control-with-git-and-github" class="nav-link" data-scroll-target="#version-control-with-git-and-github">Version control with git and GitHub</a>
  <ul class="collapse">
  <li><a href="#what-is-versioning" id="toc-what-is-versioning" class="nav-link" data-scroll-target="#what-is-versioning">What is versioning?</a></li>
  <li><a href="#what-is-versioning-1" id="toc-what-is-versioning-1" class="nav-link" data-scroll-target="#what-is-versioning-1">What is versioning?</a></li>
  <li><a href="#why-do-we-need-version-control" id="toc-why-do-we-need-version-control" class="nav-link" data-scroll-target="#why-do-we-need-version-control">Why do we need version control?</a></li>
  <li><a href="#git-and-github" id="toc-git-and-github" class="nav-link" data-scroll-target="#git-and-github">git and GitHub</a></li>
  </ul></li>
  <li><a href="#multivariable-relationships" id="toc-multivariable-relationships" class="nav-link" data-scroll-target="#multivariable-relationships">Multivariable relationships</a>
  <ul class="collapse">
  <li><a href="#carbohydrates-in-starbucks-food" id="toc-carbohydrates-in-starbucks-food" class="nav-link" data-scroll-target="#carbohydrates-in-starbucks-food">Carbohydrates in Starbucks food</a></li>
  <li><a href="#starbucks-data" id="toc-starbucks-data" class="nav-link" data-scroll-target="#starbucks-data">Starbucks data</a></li>
  <li><a href="#terminology" id="toc-terminology" class="nav-link" data-scroll-target="#terminology">Terminology</a></li>
  <li><a href="#univariate-exploratory-data-analysis" id="toc-univariate-exploratory-data-analysis" class="nav-link" data-scroll-target="#univariate-exploratory-data-analysis">Univariate exploratory data analysis</a></li>
  <li><a href="#bivariate-exploratory-data-analysis" id="toc-bivariate-exploratory-data-analysis" class="nav-link" data-scroll-target="#bivariate-exploratory-data-analysis">Bivariate exploratory data analysis</a></li>
  <li><a href="#function-between-response-and-predictors" id="toc-function-between-response-and-predictors" class="nav-link" data-scroll-target="#function-between-response-and-predictors">Function between response and predictors</a></li>
  <li><a href="#determine-f" id="toc-determine-f" class="nav-link" data-scroll-target="#determine-f">Determine <span class="math inline">\(f\)</span></a></li>
  <li><a href="#carb-vs.-calories" id="toc-carb-vs.-calories" class="nav-link" data-scroll-target="#carb-vs.-calories">Carb vs.&nbsp;Calories</a></li>
  <li><a href="#carb-vs.-calories-bakery" id="toc-carb-vs.-calories-bakery" class="nav-link" data-scroll-target="#carb-vs.-calories-bakery">Carb vs.&nbsp;Calories + Bakery</a></li>
  <li><a href="#carb-vs.-calories-bakery-with-interaction" id="toc-carb-vs.-calories-bakery-with-interaction" class="nav-link" data-scroll-target="#carb-vs.-calories-bakery-with-interaction">Carb vs.&nbsp;Calories + Bakery (with interaction)</a></li>
  <li><a href="#statistical-model-vs.-regression-equation" id="toc-statistical-model-vs.-regression-equation" class="nav-link" data-scroll-target="#statistical-model-vs.-regression-equation">Statistical model vs.&nbsp;regression equation</a></li>
  <li><a href="#why-fit-a-model" id="toc-why-fit-a-model" class="nav-link" data-scroll-target="#why-fit-a-model">Why fit a model?</a></li>
  </ul></li>
  <li><a href="#application-exercise" id="toc-application-exercise" class="nav-link" data-scroll-target="#application-exercise">Application exercise</a>
  <ul class="collapse">
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/sta210-fa23/website/edit/main/slides/02-big-picture.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/sta210-fa23/website/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="02-big-picture.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The big picture</h1>
<p class="subtitle lead">Analyzing multivariable relationships + Reproducibility</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Prof.&nbsp;Maria Tackett </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Aug 30, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="announcements" class="level2 midi">
<h2 class="midi anchored" data-anchor-id="announcements">Announcements</h2>
<ul>
<li>Resources for extra R review
<ul>
<li><p><a href="https://learnr.numbat.space/">Learn R: An interactive introduction to data analysis R</a> (focus on Chapters 4 - 6)</p></li>
<li><p>Duke Library Center for Data and Visualization Sciences workshops</p>
<ul>
<li><p>R for Lunch: data wrangling with dplyr (Fri, Sep 1, 12:30 - 1:30)</p></li>
<li><p>R for Lunch: visualization with ggplot2 (Fri, Sep 8, 12:30 - 1:30)</p></li>
<li><p>See the <a href="https://library.duke.edu/data/workshops">CDVS website</a> for more information and to register.</p></li>
</ul></li>
</ul></li>
<li>Last day of in-person work for this class is Dec 7</li>
<li><a href="https://sta210-fa23.netlify.app/syllabus#lecture-recording-request">Lecture recordings request policy</a></li>
<li>Readings for next week will be posted later this week</li>
</ul>
</section>
<section id="questions-from-last-class" class="level1">
<h1>Questions from last class?</h1>
<section id="topics" class="level2">
<h2 class="anchored" data-anchor-id="topics">Topics</h2>
<ul>
<li>Data analysis life cycle</li>
<li>Reproducible data analysis</li>
<li>Analyzing multivariable relationships</li>
</ul>
<hr>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/02/data-analysis-life-cycle.png" class="img-fluid figure-img"></p>
<figcaption>Source: <a href="https://r4ds.hadley.nz/"><em>R for Data Science</em></a> with additions from <em>The Art of Statistics: How to Learn from Data</em>.</figcaption>
</figure>
</div>
<hr>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/02/whole-game.png" class="img-fluid figure-img"></p>
<figcaption>Source:<a href="https://r4ds.hadley.nz/"><em>R for Data Science</em></a></figcaption>
</figure>
</div>
</section>
</section>
<section id="reproducibility" class="level1">
<h1>Reproducibility</h1>
<section id="reproducibility-checklist" class="level2">
<h2 class="anchored" data-anchor-id="reproducibility-checklist">Reproducibility checklist</h2>
<div class="question">
<p>What does it mean for an analysis to be reproducible?</p>
</div>
<p>. . .</p>
<p><strong>Near term goals</strong>:</p>
<p>✔️ Can the tables and figures be exactly reproduced from the code and data?</p>
<p>✔️ Does the code actually do what you think it does?</p>
<p>✔️ In addition to what was done, is it clear <em>why</em> it was done?</p>
<p>. . .</p>
<p><strong>Long term goals</strong>:</p>
<p>✔️ Can the code be used for other data?</p>
<p>✔️ Can you extend the code to do other things?</p>
</section>
<section id="why-is-reproducibility-important" class="level2">
<h2 class="anchored" data-anchor-id="why-is-reproducibility-important">Why is reproducibility important?</h2>
<ul>
<li><p>Results produced are more reliable and trustworthy <span class="citation" data-cites="ostblom2022">(<a href="#ref-ostblom2022" role="doc-biblioref">Ostblom and Timbers 2022</a>)</span></p></li>
<li><p>Facilitates more effective collaboration <span class="citation" data-cites="ostblom2022">(<a href="#ref-ostblom2022" role="doc-biblioref">Ostblom and Timbers 2022</a>)</span></p></li>
<li><p>Contributing to science, which builds and organizes knowledge in terms of testable hypotheses <span class="citation" data-cites="alexander2023">(<a href="#ref-alexander2023" role="doc-biblioref">Alexander 2023</a>)</span></p></li>
<li><p>Possible to identify and correct errors or biases in the analysis process <span class="citation" data-cites="alexander2023">(<a href="#ref-alexander2023" role="doc-biblioref">Alexander 2023</a>)</span></p></li>
</ul>
</section>
<section id="when-things-go-wrong" class="level2 smallest">
<h2 class="smallest anchored" data-anchor-id="when-things-go-wrong">When things go wrong</h2>
<table class="table">
<thead>
<tr class="header">
<th>Reproducibility error</th>
<th>Consequence</th>
<th>Source(s)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Limitations in Excel data formats</td>
<td>Loss of 16,000 COVID case records in the UK</td>
<td>(<a href="https://www.bbc.com/news/technology-54423988">Kelion 2020</a>)</td>
</tr>
<tr class="even">
<td>Automatic formatting in Excel</td>
<td>Important genes disregarded in scientific studies</td>
<td>(<a href="https://genomebiology.biomedcentral.com/articles/10.1186/s13059-016-1044-7">Ziemann, Eren, and El-Osta 2016</a>)</td>
</tr>
<tr class="odd">
<td>Deletion of a cell caused rows to shift</td>
<td>Mix-up of which patient group received the treatment</td>
<td>(<a href="https://pubmed.ncbi.nlm.nih.gov/27373757/">Wallensteen et al.&nbsp;2018</a>)</td>
</tr>
<tr class="even">
<td>Using binary instead of explanatory labels</td>
<td>Mix-up of the intervention with the control group</td>
<td>(<a href="https://jamanetwork.com/journals/jama/fullarticle/2752474">Aboumatar and Wise 2019</a>)</td>
</tr>
<tr class="odd">
<td>Using the same notation for missing data and zero values</td>
<td>Paper retraction</td>
<td>(<a href="https://www.nature.com/articles/s41586-021-03656-3">Whitehouse et al.&nbsp;2021</a>)</td>
</tr>
<tr class="even">
<td>Incorrectly copying data in a spreadsheet</td>
<td>Delay in the opening of a hospital</td>
<td>(<a href="https://www.bbc.com/news/uk-scotland-edinburgh-east-fife-53893101">Picken 2020</a>)</td>
</tr>
</tbody>
</table>
<p>Source: <span class="citation" data-cites="ostblom2022">Ostblom and Timbers (<a href="#ref-ostblom2022" role="doc-biblioref">2022</a>)</span></p>
</section>
<section id="toolkit" class="level2">
<h2 class="anchored" data-anchor-id="toolkit">Toolkit</h2>
<ul>
<li><p><strong>Scriptability</strong> <span class="math inline">\(\rightarrow\)</span> R</p></li>
<li><p><strong>Literate programming</strong> (code, narrative, output in one place) <span class="math inline">\(\rightarrow\)</span> Quarto</p></li>
<li><p><strong>Version control</strong> <span class="math inline">\(\rightarrow\)</span> Git / GitHub</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will start using these computing tools in Lab 01.</p>
</div>
</div>
</section>
<section id="r-and-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="r-and-rstudio">R and RStudio</h2>
<ul>
<li><p>R is a statistical programming language</p></li>
<li><p>RStudio is a convenient interface for R (an integrated development environment, IDE)</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/03/r_vs_rstudio_1.png" class="img-fluid figure-img"></p>
<figcaption>Source: <a href="https://moderndive.com/1-getting-started.html">Statistical Inference via Data Science</a></figcaption>
</figure>
</div>
<hr>
</section>
<section id="rstudio-ide" class="level2">
<h2 class="anchored" data-anchor-id="rstudio-ide">RStudio IDE</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/02/rstudio-panes.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<hr>
</section>
<section id="quarto" class="level2">
<h2 class="anchored" data-anchor-id="quarto">Quarto</h2>
<ul>
<li><p>Fully reproducible reports – the analysis is run from the beginning each time you render</p></li>
<li><p>Code goes in chunks and narrative goes outside of chunks</p></li>
<li><p>Visual editor to make document editing experience similar to a word processor (Google docs, Word, Pages, etc.)</p></li>
</ul>
</section>
<section id="quarto-1" class="level2">
<h2 class="anchored" data-anchor-id="quarto-1">Quarto</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/03/quarto.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="how-will-we-use-quarto" class="level2">
<h2 class="anchored" data-anchor-id="how-will-we-use-quarto">How will we use Quarto?</h2>
<ul>
<li><p>Every application exercise and assignment is written in a Quarto document</p></li>
<li><p>You’ll have a template Quarto document to start with</p></li>
<li><p>The amount of scaffolding in the template will decrease over the semester</p></li>
</ul>
</section>
</section>
<section id="version-control-with-git-and-github" class="level1">
<h1>Version control with git and GitHub</h1>
<section id="what-is-versioning" class="level2">
<h2 class="anchored" data-anchor-id="what-is-versioning">What is versioning?</h2>
<p><br></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/02/lego-steps.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<hr>
</section>
<section id="what-is-versioning-1" class="level2">
<h2 class="anchored" data-anchor-id="what-is-versioning-1">What is versioning?</h2>
<p>with human readable messages</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/02/lego-steps-commit-messages.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<hr>
</section>
<section id="why-do-we-need-version-control" class="level2">
<h2 class="anchored" data-anchor-id="why-do-we-need-version-control">Why do we need version control?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/02/phd_comics_vc.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<p>Provides a clear record of how the analysis methods evolved. This makes analysis auditable and thus more trustworthy and reliable. <span class="citation" data-cites="ostblom2022">(<a href="#ref-ostblom2022" role="doc-biblioref">Ostblom and Timbers 2022</a>)</span></p>
</div>
</div>
</section>
<section id="git-and-github" class="level2">
<h2 class="anchored" data-anchor-id="git-and-github">git and GitHub</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/02/git-github.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<ul>
<li><strong>git</strong> is a version control system – like “Track Changes” features from Microsoft Word.</li>
<li><strong>GitHub</strong> is the home for your git-based projects on the internet (like DropBox but much better).</li>
<li>There are a lot of git commands and very few people know them all. 99% of the time you will use git to add, commit, push, and pull.</li>
</ul>
</section>
</section>
<section id="multivariable-relationships" class="level1">
<h1>Multivariable relationships</h1>
<section id="carbohydrates-in-starbucks-food" class="level2">
<h2 class="anchored" data-anchor-id="carbohydrates-in-starbucks-food">Carbohydrates in Starbucks food</h2>
<ul>
<li><p>Starbucks often displays the total calories in their food items but not the other nutritional information.</p></li>
<li><p>Carbohydrates are a body’s main fuel source. The Dietary Guidelines for America recommend that carbohydrates make up 45% to 65% of total daily calories.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p></li>
<li><p>Our goal is to understand the relationship between the amount of carbohydrates and calories in Starbucks food items. We’d also like to assess if the relationship differs based on the type of food item (bakery, salad, sandwich, etc.)</p></li>
</ul>
<hr>
</section>
<section id="starbucks-data" class="level2">
<h2 class="anchored" data-anchor-id="starbucks-data">Starbucks data</h2>
<!-- change example, or at a minimum change bakery labels to "bakery vs. not bakery" instead of 0 and 1.-->
<ul>
<li><strong>Observations</strong>: 77 Starbucks food items</li>
<li><strong>Variables:</strong>
<ul>
<li><code>carb</code>: Total carbohydrates (in grams)</li>
<li><code>calories</code>: Total calories</li>
<li><code>bakery</code>: 1: bakery food item, 0: other food type</li>
</ul></li>
</ul>
</section>
<section id="terminology" class="level2">
<h2 class="anchored" data-anchor-id="terminology">Terminology</h2>
<ul>
<li><code>carb</code> is the <strong>response variable</strong>
<ul>
<li>variable whose variation we want to understand / variable we wish to predict</li>
<li>also known as <em>outcome</em> or <em>dependent</em> variable</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li><code>calories</code>, <code>bakery</code> are the <strong>predictor variables</strong>
<ul>
<li>variables used to account for variation in the response</li>
<li>also known as <em>explanatory</em>, <em>independent</em>, or <em>input</em> variables</li>
</ul></li>
</ul>
</section>
<section id="univariate-exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="univariate-exploratory-data-analysis">Univariate exploratory data analysis</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02-big-picture_files/figure-html/univariate-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="bivariate-exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="bivariate-exploratory-data-analysis">Bivariate exploratory data analysis</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02-big-picture_files/figure-html/bivariate-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="function-between-response-and-predictors" class="level2">
<h2 class="anchored" data-anchor-id="function-between-response-and-predictors">Function between response and predictors</h2>
<div class="goal">
<p><span class="math display">\[\text{carb} = f(\text{calories}, \text{bakery}) + \epsilon\]</span></p>
</div>
<ul>
<li><strong>Goal</strong>: Determine <span class="math inline">\(f\)</span></li>
<li>How do we determine <span class="math inline">\(f\)</span>?
<ul>
<li>Make an assumption about the functional form <span class="math inline">\(f\)</span> (parametric model)</li>
<li>Use the data to fit a model based on that form</li>
</ul></li>
</ul>
</section>
<section id="determine-f" class="level2">
<h2 class="anchored" data-anchor-id="determine-f">Determine <span class="math inline">\(f\)</span></h2>
<ol type="1">
<li>Choose the functional form of <span class="math inline">\(f\)</span>, i.e., <strong>choose the appropriate model given the response variable</strong></li>
</ol>
<ul>
<li>Suppose <span class="math inline">\(f\)</span> takes the form of a linear model<br>
<span class="math display">\[y = f(\mathbf{X}) = \beta_0 + \beta_1 x_1 + \dots + \beta_p x_p + \epsilon\]</span></li>
</ul>
<p>. . .</p>
<ol start="2" type="1">
<li>Use the data to fit (or train) the model, i.e, <strong>estimate the model parameters,</strong> <span class="math inline">\(\beta_0, \beta_1, \ldots, \beta_p\)</span></li>
</ol>
</section>
<section id="carb-vs.-calories" class="level2">
<h2 class="anchored" data-anchor-id="carb-vs.-calories">Carb vs.&nbsp;Calories</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02-big-picture_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p><span class="math display">\[\text{carb} = \beta_0 + \beta_1 ~\text{calories} + \epsilon\]</span></p>
<hr>
</section>
<section id="carb-vs.-calories-bakery" class="level2">
<h2 class="anchored" data-anchor-id="carb-vs.-calories-bakery">Carb vs.&nbsp;Calories + Bakery</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02-big-picture_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p><span class="math display">\[\text{carb} = \beta_0 + \beta_1 ~\text{calories} + \beta_2 ~\text{bakery} + \epsilon\]</span></p>
</section>
<section id="carb-vs.-calories-bakery-with-interaction" class="level2">
<h2 class="anchored" data-anchor-id="carb-vs.-calories-bakery-with-interaction">Carb vs.&nbsp;Calories + Bakery (with interaction)</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02-big-picture_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p><span class="math display">\[{\small \text{carb} = \beta_0 + \beta_1 ~\text{calories} + \beta_2 ~\text{bakery} + \beta_3 ~ \text{calories} \times \text{bakery}  + \epsilon}\]</span></p>
</section>
<section id="statistical-model-vs.-regression-equation" class="level2 midi">
<h2 class="midi anchored" data-anchor-id="statistical-model-vs.-regression-equation">Statistical model vs.&nbsp;regression equation</h2>
<p><strong>Statistical model (also known as data-generating model)</strong></p>
<p><span class="math display">\[{\small \text{carb} = \beta_0 + \beta_1 ~\text{calories} + \beta_2 ~\text{bakery} + \beta_3 ~ \text{calories} \times \text{bakery}  + \epsilon}\]</span></p>
<p>Models the process for generating values of the response in the population (function + error)</p>
<p><br></p>
<p>. . .</p>
<p><strong>Regression equation</strong></p>
<p>Estimate of the function using the sample data</p>
<p><span class="math display">\[{\small \hat{\text{carb}} = \hat{\beta}_0 + \hat{\beta}_1 ~\text{calories} + \hat{\beta}_2 ~\text{bakery} + \hat{\beta}_3 ~ \text{calories} \times \text{bakery}}\]</span></p>
</section>
<section id="why-fit-a-model" class="level2">
<h2 class="anchored" data-anchor-id="why-fit-a-model">Why fit a model?</h2>
<ul>
<li><p><strong>Prediction:</strong> Expected value of the response variable for given values of the predictor variables</p></li>
<li><p><strong>Inference:</strong> Conclusion about the relationship between the response and predictor variables</p></li>
</ul>
<div class="question">
<ul>
<li><p>What is an example of a <strong>prediction</strong> question that can be answered using the model of carb vs.&nbsp;calories and bakery?</p></li>
<li><p>What is an example of an <strong>inference</strong> question that can be answered using the model of carb vs.&nbsp;calories and bakery?</p></li>
</ul>
</div>
</section>
</section>
<section id="application-exercise" class="level1">
<h1>Application exercise</h1>
<div class="appex">
<p>📋 <a href="https://sta210-fa23.netlify.app/ae/ae-02-bikeshare.html">sta210-fa23.netlify.app/ae/ae-02-bikeshare</a></p>
</div>
<section id="recap" class="level2 midi">
<h2 class="midi anchored" data-anchor-id="recap">Recap</h2>
<ul>
<li><p><strong>Reproducibility</strong></p>
<ul>
<li><p>It is best practice conduct all data analysis in a reproducible way</p></li>
<li><p>We will implement a reproducible workflow using R, Quarto, and git/GitHub</p></li>
</ul></li>
</ul>
<!-- -->
<ul>
<li><p><strong>Multivariable relationships</strong></p>
<ul>
<li><p>We can use exploratory data analysis to describe the relationship between two variables</p></li>
<li><p>We make an assumption about the relationship between variables when doing linear regression</p></li>
<li><p>The two main objectives for fitting a linear regression model are (1) prediction and (2) inference</p></li>
</ul></li>
</ul>
</section>
<section id="references" class="level2">




</section>
</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-alexander2023" class="csl-entry" role="listitem">
Alexander, Rohan. 2023. <span>“Telling Stories with Data,”</span> June. <a href="https://doi.org/10.1201/9781003229407">https://doi.org/10.1201/9781003229407</a>.
</div>
<div id="ref-ostblom2022" class="csl-entry" role="listitem">
Ostblom, Joel, and Tiffany Timbers. 2022. <span>“Opinionated Practices for Teaching Reproducibility: Motivation, Guided Instruction and Practice.”</span> <em>Journal of Statistics and Data Science Education</em> 30 (3): 241–50. <a href="https://doi.org/10.1080/26939169.2022.2074922">https://doi.org/10.1080/26939169.2022.2074922</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Source: <a href="https://www.mayoclinic.org/healthy-lifestyle/nutrition-and-healthy-eating/in-depth/carbohydrates/art-20045705#:~:text=How%20many%20carbohydrates%20do%20you,grams%20of%20carbs%20a%20day.">Mayo Clinic</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/sta210-fa23\.netlify\.app");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2022, Maria Tackett</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/sta210-fa23/website/edit/main/slides/02-big-picture.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/sta210-fa23/website/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This site is built with <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>