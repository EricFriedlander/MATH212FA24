{
  "hash": "794a8a3c963c07ce1dc643e7e2141a3c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AE 03: Bootstrap confidence intervals\"\nauthor: \"Driver: ____, Reporter: _____, Gopher: _____\"\nsubtitle: \"Bikeshare\"\ndate: \"Sep 6, 2024\"\neditor: visual\n---\n\n\n::: callout-important\n-   Open [RStudio](https://rstudio.collegeofidaho.edu/) and create a subfolder in your AE folder called \"AE-03\"\n\n-   Go to the [course Canvas page](https://cofi.instructure.com/courses/15692/assignments/181095) and locate your `AE 03` assignment to get started.\n\n-   Upload the `ae-03.qmd` and `dcbikeshare.csv` files into the folder you just created.\n\nThe `.qmd` and `.pdf` files uploaded to Canvas no later than Monday, September 9 at 11:59pm.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggformula)\nlibrary(broom)\nlibrary(infer)\nlibrary(openintro)\nlibrary(kableExtra)\n```\n:::\n\n\n## Data\n\nOur dataset contains daily rentals from the Capital Bikeshare in Washington, DC in 2011 and 2012 filtered to only contain the winter months. It was obtained from the `dcbikeshare` data set in the `dsbox` R package.\n\nWe will focus on the following variables in the analysis:\n\n-   `count`: total bike rentals\n-   `temp_orig`: Temperature in degrees Celsius\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwinter <- read_csv(\"../ae/data/dcbikeshare.csv\") |>\n  mutate(season = case_when(\n    season == 1 ~ \"winter\",\n    season == 2 ~ \"spring\",\n    season == 3 ~ \"summer\",\n    season == 4 ~ \"fall\"\n  ),\n  season = factor(season)) |>\n  filter(season == \"winter\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 731 Columns: 17\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl  (16): instant, season, yr, mnth, holiday, weekday, workingday, weathers...\ndate  (1): dteday\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(winter)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 181\nColumns: 17\n$ instant    <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, …\n$ dteday     <date> 2011-01-01, 2011-01-02, 2011-01-03, 2011-01-04, 2011-01-05…\n$ season     <fct> winter, winter, winter, winter, winter, winter, winter, win…\n$ yr         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ mnth       <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ holiday    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,…\n$ weekday    <dbl> 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4,…\n$ workingday <dbl> 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1,…\n$ weathersit <dbl> 2, 2, 1, 1, 1, 1, 2, 2, 1, 1, 2, 1, 1, 1, 2, 1, 2, 2, 2, 2,…\n$ temp       <dbl> 0.3441670, 0.3634780, 0.1963640, 0.2000000, 0.2269570, 0.20…\n$ atemp      <dbl> 0.3636250, 0.3537390, 0.1894050, 0.2121220, 0.2292700, 0.23…\n$ hum        <dbl> 0.805833, 0.696087, 0.437273, 0.590435, 0.436957, 0.518261,…\n$ windspeed  <dbl> 0.1604460, 0.2485390, 0.2483090, 0.1602960, 0.1869000, 0.08…\n$ casual     <dbl> 331, 131, 120, 108, 82, 88, 148, 68, 54, 41, 43, 25, 38, 54…\n$ registered <dbl> 654, 670, 1229, 1454, 1518, 1518, 1362, 891, 768, 1280, 122…\n$ count      <dbl> 985, 801, 1349, 1562, 1600, 1606, 1510, 959, 822, 1321, 126…\n$ temp_orig  <dbl> 14.110847, 14.902598, 8.050924, 8.200000, 9.305237, 8.37826…\n```\n\n\n:::\n:::\n\n\n## Exploratory data analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngf_point(count ~ temp_orig, data = winter, alpha = 0.7) |> \n  gf_labs(\n    x = \"Temperature (C)\",\n    y = \"Number of Bike Rentals\",\n  )\n```\n\n::: {.cell-output-display}\n![](ae-03-bootstrap_files/figure-html/scatterplot-1.png){width=672}\n:::\n:::\n\n\n## Model\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel_fit <- lm(count ~ temp_orig, data = winter)\n\ntidy(model_fit) |>\n  kable(digits = 2)\n```\n\n::: {.cell-output-display}\n\n\n|term        | estimate| std.error| statistic| p.value|\n|:-----------|--------:|---------:|---------:|-------:|\n|(Intercept) |  -111.04|    238.31|     -0.47|    0.64|\n|temp_orig   |   222.42|     18.46|     12.05|    0.00|\n\n\n:::\n:::\n\n\n## Bootstrap confidence interval\n\n### 1. Calculate the observed fit (slope)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nobserved_fit <- winter |>\n  specify(count ~ temp_orig) |>\n  fit()\n\nobserved_fit\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 2\n  term      estimate\n  <chr>        <dbl>\n1 intercept    -111.\n2 temp_orig     222.\n```\n\n\n:::\n:::\n\n\n### 2. Take *n* bootstrap samples and fit models to each one.\n\nFill in the code, then set `eval: true` .\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn = 100\nset.seed(212)\n\nboot_fits <- ______ |>\n  specify(______) |>\n  generate(reps = ____, type = \"bootstrap\") |>\n  fit()\n\nboot_fits\n```\n:::\n\n\n-   Why do we set a seed before taking the bootstrap samples?\n\n-   Make a histogram of the bootstrap samples to visualize the bootstrap distribution.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # Code for histogram\n    ```\n    :::\n\n\n### 3. Compute the 95% confidence interval as the middle 95% of the bootstrap distribution\n\nFill in the code, then set `eval: true` .\n\n\n::: {.cell}\n\n```{.r .cell-code}\nget_confidence_interval(\n  boot_fits, \n  point_estimate = _____, \n  level = ____,\n  type = \"percentile\"\n)\n```\n:::\n\n\n## Changing confidence level\n\n### Modify the code from Step 3 to create a 90% confidence interval.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Paste code for 90% confidence interval\n```\n:::\n\n\n### Modify the code from Step 3 to create a 99% confidence interval.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Paste code for 90% confidence interval\n```\n:::\n\n\n-   Which confidence level produces the most accurate confidence interval (90%, 95%, 99%)? Explain\n\n-   Which confidence level produces the most precise confidence interval (90%, 95%, 99%)? Explain\n\n-   If we want to be very certain that we capture the population parameter, should we use a wider or a narrower interval? What drawbacks are associated with using a wider interval?\n\n::: callout-important\nTo submit the AE:\n\n-   Render the document to produce the PDF file with all of your work from today's class.\n\n-   Upload your .qmd file and your .pdf file to Canvas. Note, please unzip the folder you download from the RStudio platform before uploading it.\n:::\n",
    "supporting": [
      "ae-03-bootstrap_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}